<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Szakm√≥dszertan I. - Pro Digit√°lis Tud√°st√°r</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #2ec4b6;
            --accent: #f72585;
            --knowledge: #fbbf24;
            --bg: #fdfdfd;
            --text: #1e293b;
            --line-color: #94a3b8;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0; display: flex; height: 100vh; overflow: hidden;
            background-color: var(--bg);
            background-image: 
                linear-gradient(var(--line-color) 0.5px, transparent 0.5px),
                linear-gradient(90deg, var(--line-color) 0.5px, transparent 0.5px);
            background-size: 40px 40px;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 400px; background: white; border-right: 6px solid #e2e8f0;
            padding: 25px 15px; overflow-y: auto; flex-shrink: 0; z-index: 100;
            box-shadow: 10px 0 30px rgba(0,0,0,0.05);
        }

        .sidebar h2 { 
            font-family: 'Fredoka', sans-serif; color: var(--accent);
            text-align: center; font-size: 1.8rem; margin-bottom: 25px;
        }

        .nav-item {
            padding: 16px 20px; margin-bottom: 10px; cursor: pointer; border-radius: 15px;
            font-size: 1.05rem; font-weight: 700; color: #475569;
            transition: 0.3s; background: #f1f5f9; border: 3px solid transparent;
            line-height: 1.3;
        }

        .nav-item:hover { background: #fff1f2; color: var(--accent); transform: translateX(5px); }
        .nav-item.active { background: var(--accent); color: white; border-color: #be185d; transform: scale(1.02); }

        /* --- TOP LEFT HUD --- */
        .hud-container {
            position: absolute; top: 20px; left: 420px;
            display: flex; align-items: center; gap: 15px;
            background: white; padding: 10px 25px; border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); z-index: 200;
            border: 3px solid var(--knowledge);
        }

        .bulb-box {
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .bulb-icon {
            font-size: 2.2rem; filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.6));
            animation: pulse-light 2s infinite ease-in-out;
        }

        @keyframes pulse-light { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .xp-text-group { line-height: 1.1; }
        .xp-val { font-family: 'Fredoka', sans-serif; font-size: 1.5rem; color: var(--primary); margin: 0; }
        .rank-name { font-size: 0.8rem; font-weight: 800; color: #94a3b8; text-transform: uppercase; }

        /* --- CANVAS & MAP --- */
        .canvas {
            flex-grow: 1; padding: 120px 40px 60px; overflow: auto;
            position: relative; display: flex; flex-direction: column; align-items: center;
        }

        .map-root { display: flex; flex-direction: column; align-items: center; gap: 120px; width: 100%; }
        
        .sub-grid { 
            display: flex; flex-wrap: wrap; gap: 40px; 
            justify-content: center; width: 100%; max-width: 1500px;
            position: relative;
        }

        /* --- CARDS --- */
        .card { perspective: 1200px; width: 320px; height: 190px; position: relative; z-index: 10; }
        .card-inner {
            position: relative; width: 100%; height: 100%;
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d; cursor: pointer;
        }
        .card.flipped .card-inner { transform: rotateY(180deg); }

        .face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 20px; padding: 25px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            box-shadow: 0 10px 0 rgba(0,0,0,0.03); border: 4px solid #fff;
        }

        .front { background: white; font-weight: 800; color: var(--text); font-size: 1.2rem; }
        .back { transform: rotateY(180deg); background: #fdf2f8; overflow-y: auto; text-align: left; }

        .main-node .face { border-color: var(--primary); background: #eef2ff; }
        .sub-node .face { border-color: var(--secondary); background: #f0fdf4; }

        .tag { font-size: 0.75rem; font-weight: 900; color: var(--accent); margin-bottom: 8px; text-transform: uppercase; }
        .card-desc { font-size: 1.1rem; line-height: 1.4; color: #334155; }

        /* --- SVG DRAWING --- */
        #svg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .technical-line { fill: none; stroke: #94a3b8; stroke-width: 2.5; stroke-dasharray: 6; stroke-linecap: round; }
        .flow-blob { fill: var(--primary); animation: slideFlow 4s linear infinite; }

        .particle {
            position: fixed; width: 15px; height: 15px; background: var(--knowledge);
            border-radius: 50%; pointer-events: none; z-index: 300;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>üèÜ SZAK√âRT≈êI T√âR</h2>
    <div id="nav-list"></div>
</div>

<div class="hud-container">
    <div class="bulb-box" id="bulb-box">
        <span class="bulb-icon">üí°</span>
    </div>
    <div class="xp-text-group">
        <p class="xp-val"><span id="xp-display">0</span> XP</p>
        <div id="rank-display" class="rank-name">√öjonc</div>
    </div>
</div>

<div class="canvas">
    <svg id="svg-layer"></svg>
    <div class="map-root" id="map-root"></div>
</div>

<script>
let xpCount = 0;
let seenDefinitions = new Set();
const ranksList = ["√öjonc", "Kezd≈ë", "Halad√≥", "Mester", "Szak√©rt≈ë", "M√©rn√∂k-G√©niusz"];

const dataset = [
    {
        id: 1, title: "1. Szakm√≥dszertan & Rajz helye",
        main: { h: "T√©tel 1 √ñsszefoglal√≥", b: "A tant√°rgy-pedag√≥gia elm√©leti keretei √©s a m≈±szaki rajz szakk√©pz√©si poz√≠ci√≥j√°nak r√∂gz√≠t√©se." },
        subs: [
            { h: "Szakm√≥dszertan", b: "Saj√°tos tant√°rgy-pedag√≥gia: h√≠d a szakmai tud√°s √©s az √°ltal√°nos pedag√≥giai elvek k√∂z√∂tt." },
            { h: "Didaktika", b: "Az oktat√°s √°ltal√°nos elm√©lete; ennek elveit (pl. fokozatoss√°g) alkalmazzuk a rajzfeladatokban." },
            { h: "Konstrukt√≠v pedag√≥gia", b: "A tanul√≥ akt√≠van √©p√≠ti fel tud√°s√°t megl√©v≈ë ismereteire alapozva; a tan√°r mentor √©s k√∂rnyezetbiztos√≠t√≥." },
            { h: "√Ågazati alapoktat√°s", b: "A szakk√©pz√©s els≈ë szakasza (9-10. √©vf.), c√©lja az egys√©ges szakmai kommunik√°ci√≥s nyelv elsaj√°t√≠t√°sa." },
            { h: "Statikus feladatok", b: "R√∂gz√≠tett tartalmi elemek: szabv√°nyok, jelek, vonalfajt√°k √©s m√©retez√©si szab√°lyok alkalmaz√°sa." },
            { h: "Dinamikus feladatok", b: "K√©pess√©gfejleszt√©s: t√©rszeml√©let, probl√©mamegold√°s, kreativit√°s √©s szakmai ig√©nyess√©g form√°l√°sa." },
            { h: "Koncentr√°ci√≥", b: "Tant√°rgyk√∂zis√©g: a rajz tudatos √∂sszekapcsol√°sa a geometri√°val √©s a szakmai gyakorlattal." }
        ]
    },
    {
        id: 2, title: "2. Tant√°rgyi saj√°toss√°gok",
        main: { h: "T√©tel 2 √ñsszefoglal√≥", b: "A m≈±szaki rajz tan√≠t√°s√°nak speci√°lis l√©p√©sei √©s a tipikus m√≥dszertani buktat√≥k." },
        subs: [
            { h: "C√©lok operacion√°l√°sa", b: "A tanul√°si c√©lok megfogalmaz√°sa konkr√©t, m√©rhet≈ë tev√©kenys√©gek form√°j√°ban; az objekt√≠v √©rt√©kel√©s alapja." },
            { h: "Extrinsic motiv√°ci√≥", b: "K√ºls≈ë vez√©rl√©s: jutalmak (pl. oszt√°lyzat) vagy elv√°r√°sok √°ltal hajtott tanul√°s." },
            { h: "Intrinsic motiv√°ci√≥", b: "Bels≈ë hajt√≥er≈ë: a tev√©kenys√©g √∂r√∂me, a meg√©rt√©s v√°gya √©s a kompetencia√©lm√©ny." },
            { h: "Elm√©leti r√∂gz√≠t√©s", b: "A tud√°s megszil√°rd√≠t√°s√°nak 1. f√°zisa: a szab√°lyok √©s t√∂rv√©nyszer≈±s√©gek meg√©rt√©se." },
            { h: "Reprodukt√≠v gyakorl√°s", b: "A tud√°s megszil√°rd√≠t√°s√°nak 2. f√°zisa: mintafeladatok megold√°sa √©s begyakorl√°sa." },
            { h: "Konstrukt√≠v gyakorl√°s", b: "A tud√°s megszil√°rd√≠t√°s√°nak 3. f√°zisa: ismeretek alkalmaz√°sa √∫j, ismeretlen feladatokban." },
            { h: "Vizu√°lis transzform√°ci√≥", b: "Kognit√≠v m≈±velet: 3D t√°rgy 2D k√≥dol√°sa √©s a rajz alapj√°n t√∂rt√©n≈ë 3D ment√°lis √∫jra√©p√≠t√©s." },
            { h: "Adaptivit√°s hi√°nya", b: "Gyakori hiba: a tanul√≥k elt√©r≈ë temp√≥j√°nak √©s el≈ëk√©pzetts√©g√©nek figyelmen k√≠v√ºl hagy√°sa." },
            { h: "T√∫lzott szeml√©ltet√©s", b: "Gyakori hiba: a k√©sz megold√°sok (anim√°ci√≥k) t√∫ltol√°sa, ami sorvasztja a bels≈ë k√©palkot√°st." },
            { h: "Szerkeszt√©s-centrikuss√°g", b: "Gyakori hiba: a technikai vonalh√∫z√°s fontosabb√° v√°lik, mint a t√°rgy t√©nyleges m≈±szaki √©rtelmez√©se." },
            { h: "Ellen≈ërz√©s t√≠pusai", b: "Diagnosztikus (helyzetk√©p), Format√≠v (fejleszt≈ë visszajelz√©s), Szummat√≠v (lez√°r√≥ min≈ës√≠t√©s)." }
        ]
    },
    {
        id: 3, title: "3. Az √©szlel√©s folyamata",
        main: { h: "T√©tel 3 √ñsszefoglal√≥", b: "Hogyan dolgozza fel a szem √©s az agy a vizu√°lis inform√°ci√≥t? Biol√≥giai √©s l√©lektani szintek." },
        subs: [
            { h: "Percepci√≥", b: "Akt√≠v folyamat: az √©rz√©kszervekre hat√≥ ingerek felv√©tele √©s agyi feldolgoz√°sa." },
            { h: "Percepci√≥s szintek", b: "A feldolgoz√°s √∫tja: Detekci√≥ (√©szrev√©tel) -> Diszkrimin√°ci√≥ (k√ºl√∂nbs√©gt√©tel) -> Identifik√°ci√≥ (felismer√©s)." },
            { h: "Szakk√°d √©s fix√°ci√≥", b: "A szem gyors ugr√°sokkal tapogat (szakk√°d) √©s a meg√°ll√°sok (fix√°ci√≥) alatt fogadja be az inf√≥t." },
            { h: "Gestalt-elvek", b: "Alakl√°t√°s: az agy t√∂rekv√©se, hogy az ingereket √©rtelmes, szervezett eg√©szk√©nt √©szlelje." },
            { h: "Z√°rts√°g elve", b: "Gestalt t√∂rv√©ny: a hi√°nyos kont√∫rokat (pl. szaggatott vonal) az agy z√°rt alakzatk√©nt eg√©sz√≠ti ki." },
            { h: "Geon-elm√©let", b: "Biederman szerint a t√°rgyakat elemi geometriai idomok (geonok) kombin√°ci√≥jak√©nt azonos√≠tjuk." },
            { h: "Ventr√°lis (‚ÄûMi?‚Äù √∫t)", b: "A t√°rgyfelismer√©s√©rt, formai √©s sz√≠nazonos√≠t√°s√©rt felel≈ës p√°rhuzamos agyi p√°lya." },
            { h: "Dorz√°lis (‚ÄûHol?‚Äù √∫t)", b: "A t√©ri helyzet, a mozg√°s √©s a m√©lys√©g √©szlel√©s√©√©rt felel≈ës p√°rhuzamos agyi p√°lya." },
            { h: "L√°t√°si konstanci√°k", b: "K√©pess√©g: a t√°rgy tulajdons√°gait (m√©ret, alak) √°lland√≥nak √©szlelj√ºk v√°ltoz√≥ k√∂r√ºlm√©nyek k√∂z√∂tt is." }
        ]
    },
    {
        id: 4, title: "4. Reprezent√°ci√≥ √©s figyelem",
        main: { h: "T√©tel 4 √ñsszefoglal√≥", b: "A l√°tott inform√°ci√≥k bels≈ë t√°rol√°sa √©s a feldolgoz√°s kognit√≠v ir√°nyai." },
        subs: [
            { h: "Bottom-up √©szlel√©s", b: "Adatvez√©relt feldolgoz√°s: a fizikai jellemz≈ëkb≈ël √©p√≠tkezik felfel√© (kezd≈ëkre jellemz≈ë)." },
            { h: "Top-down √©szlel√©s", b: "Tud√°salap√∫ feldolgoz√°s: a tapasztalat √©s elv√°r√°s ir√°ny√≠tja a l√°t√°st (szak√©rt≈ëkre jellemz≈ë)." },
            { h: "Ment√°lis reprezent√°ci√≥", b: "A k√ºlvil√°g t√°rgyainak az agyban t√°rolt bels≈ë modellje √©s lek√©pez≈ëd√©se." },
            { h: "Kett≈ës k√≥dol√°s (Paivio)", b: "Az agy p√°rhuzamosan haszn√°l verb√°lis √©s k√©pi k√≥dokat a hat√©konyabb felid√©z√©s√©rt." },
            { h: "Ment√°lis forgat√°s", b: "K√©pess√©g a bels≈ë k√©p t√©rbeli elforgat√°s√°ra; a m≈±velet ideje ar√°nyos az elforgat√°s sz√∂g√©vel." },
            { h: "Ment√°lis p√°szt√°z√°s", b: "A bels≈ë k√©pen val√≥ v√©gigtekint√©s √©s t√°j√©koz√≥d√°s k√©pess√©ge az elm√©ben." },
            { h: "Szelekt√≠v figyelem", b: "Az √©szlel√©s ir√°nyults√°ga: a l√©nyeg kiemel√©se √©s a zavar√≥ ingerek akt√≠v sz≈±r√©se." },
            { h: "Tart√≥s figyelem", b: "Vigilancia: az √©szlel√©si k√©szenl√©t fenntart√°sa hossz√∫ t√°von (pl. bonyolult rajz ellen≈ërz√©se)." }
        ]
    },
    {
        id: 5, title: "5. Vizu√°lis kommunik√°ci√≥",
        main: { h: "T√©tel 5 √ñsszefoglal√≥", b: "A m≈±szaki rajz mint vizu√°lis nyelv √©s az √°br√°zol√≥ geometria matematikai alapjai." },
        subs: [
            { h: "Vizu√°lis kommunik√°ci√≥", b: "Inform√°ci√≥csere k√©pi jelekkel; alapfelt√©tele a k√∂z√∂s k√≥d (szabv√°nyok) ismerete." },
            { h: "Primer k√∂zl√©s", b: "K√∂zl√©sforma: a val√≥s√°g √©leth≈± ut√°nz√°sa szelekci√≥ n√©lk√ºl (pl. fot√≥)." },
            { h: "Direkt k√∂zl√©s", b: "K√∂zl√©sforma: c√©lrat√∂r≈ë, egy√©rtelm≈± √©s egyszer≈±s√≠tett inform√°l√°s (m≈±szaki √°br√°zol√°s)." },
            { h: "Absztrakci√≥", b: "L√©nyegkiemel√©s eszk√∂zei: Redukci√≥ (egyszer≈±s√≠t√©s) √©s Szelekci√≥ (fontos inf√≥k megtart√°sa)." },
            { h: "√Åbr√°zol√≥ geometria", b: "A t√©rbeli alakzatok s√≠kbeli √°br√°zol√°s√°nak tudom√°nyos alapja, a rajz 'nyelvtana'." },
            { h: "Centr√°lis vet√≠t√©s", b: "Perspekt√≠va: egy pontb√≥l vet√≠t, szeml√©letes, de gy√°rt√°sra nem m√©rettart√≥." },
            { h: "P√°rhuzamos Ortogon√°lis", b: "Mer≈ëleges sugarak: a m≈±szaki rajz alapja, mert minden k√©ps√≠kon m√©rettart√≥." },
            { h: "Monge-f√©le rendszer", b: "K√©tk√©ps√≠kos √°br√°zol√°s: mer≈ëleges vet√≠t√©s K1, K2 s√≠kokra, majd kiter√≠t√©s." },
            { h: "Axonometria", b: "T√©rhat√°s√∫ √°br√°zol√°s egyetlen k√©ps√≠kon (pl. Izometria, Dimetria, Kavalier)." },
            { h: "Testprimit√≠vek", b: "Alaptestek (has√°b, henger), amikb≈ël √©p√≠t√©ssel vagy lebont√°ssal j√∂nnek l√©tre az alakzatok." }
        ]
    },
    {
        id: 6, title: "6. T√©ri-vizu√°lis k√©pess√©gek",
        main: { h: "T√©tel 6 √ñsszefoglal√≥", b: "√ñsszetett k√©pess√©grendszer a t√©rbeli viszonyok √©szlel√©s√©re √©s manipul√°l√°s√°ra." },
        subs: [
            { h: "Tapasztalati Percepci√≥", b: "A megismer√©s als√≥ szintje: a l√°tv√°ny befogad√°sa (√°braolvas√°s, m√°sol√°s)." },
            { h: "Gondolati Appercepci√≥", b: "A megismer√©s fels≈ë szintje: a l√°tv√°ny √©rtelmez≈ë feldolgoz√°sa (alkot√°s)." },
            { h: "Orient√°ci√≥", b: "T√©ri t√°j√©koz√≥d√°s: saj√°t test√ºnk √©s a t√°rgyak helyzet√©nek meghat√°roz√°sa a t√©rben." },
            { h: "T√©rszeml√©let", b: "Elemei: Vizualiz√°ci√≥ (bels≈ë k√©p l√©trehoz√°sa) √©s Manipul√°ci√≥ (gondolati √°talak√≠t√°s)." },
            { h: "Anticip√°l√≥ k√©pzet", b: "J√∂v≈ëbeni √°llapot (pl. egy szerel√©si l√©p√©s eredm√©ny√©nek) ment√°lis el≈ërevet√≠t√©se." },
            { h: "Alak- √©s formaanal√≠zis", b: "T√©relemek (cs√∫cs, √©l, lap) azonos√≠t√°sa √©s k√∂lcs√∂n√∂s helyzet√ºk (p√°rhuzam, takar√°s) vizsg√°lata." }
        ]
    },
    {
        id: 7, title: "7. √ñsszef√ºgg√©sek felt√°r√°sa",
        main: { h: "T√©tel 7 √ñsszefoglal√≥", b: "Anal√≠zis ut√°ni szint√©zis: a t√°rgy eg√©sz√©nek √©s bels≈ë kapcsolatainak meg√©rt√©se." },
        subs: [
            { h: "Akt√≠v megfigyel√©s", b: "Ir√°ny√≠tott folyamat: vizsg√°lat szempontok (alak, ar√°ny, funkci√≥, kapcsol√≥d√°s) szerint." },
            { h: "N√©zetek kapcsolata", b: "Ugyanazon r√©szlet (pl. furat) azonos√≠t√°sa k√ºl√∂nb√∂z≈ë vet√ºleteken az azonoss√°g felismer√©s√©hez." },
            { h: "M√©ret√∂sszef√ºgg√©sek", b: "A m√©retl√°ncok √©s a geometriai k√©nyszerek (pl. illeszt√©sek) felismer√©se a rajzon." },
            { h: "Funkcion√°lis kapcsolat", b: "Annak meg√©rt√©se, hogyan kapcsol√≥dnak az alkatr√©szek egy √∂ssze√°ll√≠t√°sban (pl. menetek)." },
            { h: "Vet√ºlettri√°dok", b: "A t√©rbeli k√©p √©s a s√≠kbeli vet√ºletek k√∂z√∂tti √°lland√≥ gondolati ugr√°l√°s gyakorl√°sa." },
            { h: "Tud√°sdeficit", b: "Olyan probl√©mafelvet√©s, amely r√°k√©nyszer√≠ti a tanul√≥t az ismeretek √∫j szint√©zis√©re." },
            { h: "Modellk√©sz√≠t√©s", b: "A meg√©rt√©s legm√©lyebb szintje: s√≠kbeli inform√°ci√≥ 3D t√°rggy√° alak√≠t√°sa (pl. 3D nyomtat√°s)." }
        ]
    },
    {
        id: 8, title: "8. Alakbefoly√°sol√≥k √©s k√©pzelet",
        main: { h: "T√©tel 8 √ñsszefoglal√≥", b: "Akt√≠v l√°t√°s √©s √©szleleti fogalomalkot√°s a m≈±szaki √°br√°zol√°sban." },
        subs: [
            { h: "Akt√≠v l√°t√°s", b: "A szemmozg√°sok √©s az agy r√©v√©n megval√≥sul√≥ keres≈ë, √©rtelmez≈ë l√°t√°si folyamat." },
            { h: "√âszleleti fogalomalkot√°s", b: "Egyedi l√°tv√°nyelemekb≈ël √°ltal√°nos, absztrakt kateg√≥ri√°k (pl. 'csavar') l√©trehoz√°sa." },
            { h: "Alakbefoly√°sol√≥ t√©nyez≈ëk", b: "A t√©ri helyzet, a k√∂rnyezet, a kor√°bbi tapasztalatok √©s a t√°rgy szerkezeti v√°za." },
            { h: "M≈±szaki alapelvek", b: "Egy√©rtelm≈±s√©g, egyszer≈±s√©gre t√∂rekv√©s (szimmetria) √©s rendszerszer≈±s√©g (szabv√°nyok)." },
            { h: "Formaeml√©kezet", b: "Vizu√°lis inform√°ci√≥k (alakok, jelek) t√°rol√°s√°nak √©s pontos el≈ëh√≠v√°s√°nak k√©pess√©ge." },
            { h: "Reprodukt√≠v k√©pzelet", b: "Kor√°bban l√°tott dolgok eml√©kezetb≈ël t√∂rt√©n≈ë felid√©z√©se √©s √∫jra√©p√≠t√©se." },
            { h: "Produkt√≠v k√©pzelet", b: "M√°r megl√©v≈ë elemekb≈ël teljesen √∫j, kor√°bban nem l√©tez≈ë dolgok ment√°lis alkot√°sa." },
            { h: "Gondolati √∂sszeszerel√©s", b: "A szerkezet ment√°lis sz√©tszed√©se √©s √∫jra√∂sszerak√°sa a m≈±k√∂d√©s meg√©rt√©s√©hez." }
        ]
    },
    {
        id: 9, title: "9. Vizu√°lis gondolkod√°s",
        main: { h: "T√©tel 9 √ñsszefoglal√≥", b: "Probl√©mamegold√°s nem szavakkal, hanem vizu√°lis k√©pzetekkel √©s t√©ri viszonyokkal." },
        subs: [
            { h: "Anal√≠zis", b: "M≈±velet: r√©szekre bont√°s √©s r√©szletek vizsg√°lata (pl. idomelemz√©s)." },
            { h: "Szint√©zis", b: "M≈±velet: r√©szek egyes√≠t√©se √©s az √∂sszef√ºgg√©sek meg√©rt√©se (pl. vet√ºletekb≈ël 3D k√©p)." },
            { h: "Alakl√©trehoz√≥", b: "Saj√°toss√°g: a f≈ë funkci√≥b√≥l ered≈ë alapgeometria (pl. fogasker√©k fogazata)." },
            { h: "Alakm√≥dos√≠t√≥", b: "Saj√°toss√°g: gy√°rt√°st vagy szerel√©st seg√≠t≈ë r√©szletek (pl. √©llet√∂r√©s, lekerek√≠t√©s)." },
            { h: "√Åltal√°nos√≠t√°s (Indukci√≥)", b: "M≈±velet: egyedi esetekb≈ël √°ltal√°nos szakmai szab√°ly megfogalmaz√°sa." },
            { h: "Konkretiz√°l√°s (Dedukci√≥)", b: "M≈±velet: √°ltal√°nos szab√°ly alkalmaz√°sa egy konkr√©t, egyedi m√©rn√∂ki esetre." },
            { h: "Paprika-anal√≥gia", b: "Metszeti √°br√°zol√°s magyar√°zata: ismeretlen (metszet) meg√©rt√©se ismert (paprika) √∫tj√°n." }
        ]
    },
    {
        id: 10, title: "10. Sz√≥beli rajztanulm√°nyoz√°s",
        main: { h: "T√©tel 10 √ñsszefoglal√≥", b: "A rajzi inform√°ci√≥k (geometria, jelek, m√©retek) szisztematikus dek√≥dol√°sa." },
        subs: [
            { h: "Ir√°ny√≠tott elemz√©s", b: "Oktat√°si m√≥dszer: tan√°ri k√©rd√©sekkel vezetett rajzvizsg√°lat kezd≈ëknek." },
            { h: "√ñn√°ll√≥ elemz√©s", b: "Oktat√°si m√≥dszer: a tanul√≥ egyed√ºl dek√≥dolja a rajzot egy feladat megold√°s√°hoz." },
            { h: "Elemz√©si szintek", b: "Lehet Tematikus (egy szempont) vagy Teljes k√∂r≈± (alak, m√©ret, anyag, technol√≥gia)." },
            { h: "Rajzt√≠pusok", b: "Funkci√≥ szerint: Alkatr√©szrajz (gy√°rt√°shoz) vagy √ñssze√°ll√≠t√°si rajz (m≈±k√∂d√©shez)." },
            { h: "Fogalmi hierarchia", b: "Rendszer: Kateg√≥ria (metszet) -> Gy≈±jt≈ëfogalom (egyszer≈± m.) -> Elemi fogalom (f√©lmetszet)." },
            { h: "Osztenz√≠v defini√°l√°s", b: "Meghat√°roz√°s: r√°mutat√°ssal √©s konkr√©t szakmai p√©ld√°k felmutat√°s√°val." },
            { h: "Genetikus defini√°l√°s", b: "Meghat√°roz√°s: a dolog l√©trej√∂tt√©nek, keletkez√©s√©nek le√≠r√°s√°val." },
            { h: "Intenzion√°lis defini√°l√°s", b: "Meghat√°roz√°s: a k√∂zelebbi nem √©s a fajlagos k√ºl√∂nbs√©g logikai megad√°s√°val." }
        ]
    },
    {
        id: 11, title: "11. Rajzprobl√©m√°k & Rekonstrukci√≥",
        main: { h: "T√©tel 11 √ñsszefoglal√≥", b: "Olyan helyzetek kezel√©se, ahol a c√©lhoz vezet≈ë √∫t nem ismert √©s a rutin nem elegend≈ë." },
        subs: [
            { h: "Tud√°sdeficit", b: "Fesz√ºlts√©g a megl√©v≈ë √©s sz√ºks√©ges tud√°s k√∂z√∂tt, ami motiv√°lja a m≈±szaki gondolkod√°st." },
            { h: "Mez≈ëf√ºggetlens√©g", b: "Kognit√≠v st√≠lus: k√©pess√©g a r√©szletek k√∂rnyezett≈ël f√ºggetlen, analitikus √©szlel√©s√©re." },
            { h: "Rajzi rekonstrukci√≥", b: "A t√©rbeli (3D) t√°rgy alakj√°nak ment√°lis helyre√°ll√≠t√°sa s√≠kbeli (2D) vet√ºletei alapj√°n." },
            { h: "Lebont√≥ algoritmus", b: "Befoglal√≥ test -> F≈ë r√©szletek -> Rendez≈ëk -> Csonkol√°s -> Kih√∫z√°s folyamata." },
            { h: "6 gondolkod√≥ kalap", b: "De Bono m√≥dszere a probl√©ma t√∂bb n√©z≈ëpont√∫ (t√©ny, √©rzelem, kock√°zat) vizsg√°lat√°ra." },
            { h: "Korrekt√∫ra (Jav√≠t√°s)", b: "C√©lja r√°vezet≈ë (sz√≥krat√©szi) k√©rd√©sekkel seg√≠teni a tanul√≥t a saj√°t megold√°s megtal√°l√°s√°ra." }
        ]
    },
    {
        id: 12, title: "12. √çr√°sbeli & Jel√∂l≈ë m√≥dszerek",
        main: { h: "T√©tel 12 √ñsszefoglal√≥", b: "Gyakorlati technik√°k a munkadarabok elemz√©s√©hez √©s a szab√°lyok tudatos√≠t√°s√°hoz." },
        subs: [
            { h: "Vizu√°lis k√≥dol√°s", b: "Sz√≠nk√≥dok: s√≠k=s√°rga, henger=z√∂ld, k√∫p=k√©k fel√ºletek jel√∂l√©se a rajzolvas√°shoz." },
            { h: "Sraffoz√°si szab√°lyok", b: "Metszetjel√∂l√©s: azonos alkatr√©sz minden n√©zetben azonos m√≥don sraffozand√≥." },
            { h: "Magyar√°zat", b: "Oktat√°si m√≥dszer: az ok-okozati √∂sszef√ºgg√©sek ('mi√©rt?') felt√°r√°sa a meg√©rt√©s√©rt." },
            { h: "Direkt szeml√©ltet√©s", b: "Oktat√°si m√≥dszer: a tananyag √©rz√©kletes bemutat√°sa fizikai modellek seg√≠ts√©g√©vel." },
            { h: "Digit√°lis technol√≥gi√°k", b: "IKT: CAD szoftverek, 3D anim√°ci√≥k haszn√°lata a bels≈ë k√©palkot√°s t√°mogat√°s√°ra." }
        ]
    },
    {
        id: 13, title: "13. Tervez√©si k√©pess√©g",
        main: { h: "T√©tel 13 √ñsszefoglal√≥", b: "√öj m≈±szaki alkot√°s l√©trehoz√°s√°ra ir√°nyul√≥ komplex, integr√°lt alkot√≥ tev√©kenys√©g." },
        subs: [
            { h: "Konvergens gondolkod√°s", b: "Logikai folyamat: egyetlen helyes megold√°s fel√© (pl. szabv√°ny kiv√°laszt√°sa)." },
            { h: "Divergens gondolkod√°s", b: "Kreat√≠v folyamat: t√∂bbir√°ny√∫, alternat√≠v√°kat √©s √∫j utakat keres≈ë gondolkod√°sm√≥d." },
            { h: "Guilford-kocka", b: "Modell: az intellektus 180 komponens√©t (Tartalom, M≈±velet, Produktum) √°br√°zolja." },
            { h: "Kreativit√°s jellemz≈ëi", b: "Fluencia (gazdags√°g), Flexibilit√°s (rugalmass√°g), Originalit√°s (eredetis√©g), Elabor√°ci√≥ (kidolgozotts√°g)." },
            { h: "Kreat√≠v f√°zisok", b: "√öt: El≈ëk√©sz√ºlet -> Lappang√°s -> Megvil√°gosod√°s (Aha!) -> Kidolgoz√°s." },
            { h: "M√©retez√©si alapelv", b: "Tervez√©si korl√°t: az √©bred≈ë fesz√ºlts√©g nem haladhatja meg az anyag megengedett fesz√ºlts√©g√©t." },
            { h: "Nomogramok", b: "Seg√©dletek: grafikus diagramok bonyolult sz√°m√≠t√°sok n√©lk√ºli gyors v√°laszt√°shoz." }
        ]
    },
    {
        id: 14, title: "14. Korrekt√∫ra",
        main: { h: "T√©tel 14 √ñsszefoglal√≥", b: "A hib√°k visszacsatol√°sa √©s a fejl≈ëd√©s t√°mogat√°sa az alkot√≥folyamat sor√°n." },
        subs: [
            { h: "Sz√≥krat√©szi m√≥dszer", b: "Korrekt√∫ra r√°vezet≈ë k√©rd√©sekkel, a tanul√≥ saj√°t felismer√©s√©re √©s logik√°j√°ra √©p√≠tve." },
            { h: "Hibaforr√°sok", b: "A rajzi hib√°k elemz√©se: lehet szeml√©leti, technikai vagy szabv√°nyismereti hi√°nyoss√°g." },
            { h: "Format√≠v √©rt√©kel√©s", b: "A tanul√°st seg√≠t≈ë, folyamat k√∂zbeni visszajelz√©s a reprodukt√≠v f√°zisokban." }
        ]
    },
    {
        id: 15, title: "15. Modell ut√°ni rajzol√°s",
        main: { h: "T√©tel 15 √ñsszefoglal√≥", b: "Megfigyel≈ëk√©pess√©g √©s szabadk√©zi v√°zol√°si k√©szs√©g fejleszt√©se val√≥s t√°rgyak alapj√°n." },
        subs: [
            { h: "Ar√°nymeg√°llap√≠t√≥ m√©r√©s", b: "Ceruz√°s m√©r√©s: szabadk√©zi technika kiny√∫jtott karral az ar√°nyok (sz/m) becsl√©s√©hez." },
            { h: "Format√∂meg", b: "A t√°rgy legjellemz≈ëbb, nagy l√©pt√©k≈± befoglal√≥ form√°ja; ezzel kell kezdeni a rajzot." },
            { h: "Befoglal√≥ test", b: "Seg√©dtest: egyszer≈± test (pl. kocka) felrajzol√°sa v√°zk√©nt a bonyolult form√°khoz." },
            { h: "Didaktikai sorrend", b: "Folyamat: Nagy eg√©szt≈ël (format√∂meg) haladunk a finom r√©szletek fel√©." }
        ]
    },
    {
        id: 16, title: "16. Vet√ºleti szerkeszt√©sek",
        main: { h: "Lek√©pez√©si algoritmus", b: "A t√©rbeli t√°rgy szab√°lyos s√≠kbeli lek√©pez√©s√©nek (Monge-rendszer) tan√≠t√°si folyamata." },
        subs: [
            { h: "Indirekt (Indukt√≠v) m√≥d", b: "Tapasztalatra √©p√≠t: '√ºvegkocka' modell alapj√°n vezeti le a szab√°lyokat a megfigyel√©sb≈ël." },
            { h: "Direkt (Dedukt√≠v) m√≥d", b: "Szab√°lyalap√∫: √°ltal√°nos defin√≠ci√≥kb√≥l indul ki √©s ezeket alkalmazza p√©ld√°kra." },
            { h: "F≈ën√©zet v√°laszt√°s", b: "Els≈ë l√©p√©s: a t√°rgyat legjellemz≈ëbben mutat√≥ vagy gy√°rt√°si helyzet≈± n√©zet kijel√∂l√©se." },
            { h: "Minim√°lis n√©zetsz√°m", b: "Csak annyi vet√ºletet alkalmazunk, amennyi a t√°rgy egy√©rtelm≈± meghat√°roz√°s√°hoz kell." },
            { h: "Rendez≈ëvonalak", b: "A n√©zetek k√∂z√∂tti szigor√∫ geometriai kapcsolatot (sz√©less√©g, magass√°g) biztos√≠t√≥ v√©kony vonalak." },
            { h: "45¬∞-os seg√©dvonal", b: "Vet√≠t≈ëf√©l: a m√©lys√©gm√©retek √°tvitele oldal- √©s fel√ºln√©zet k√∂z√∂tt k√∂rz≈ë haszn√°lata n√©lk√ºl." },
            { h: "Hi√°nyp√≥tl√°s", b: "Gyakorlat 1. szint: adott n√©zeteken hi√°nyz√≥ vonalak (√©lek, tengelyek) kieg√©sz√≠t√©se." },
            { h: "Vet√ºletv√°laszt√°s", b: "Gyakorlat 2. szint: a helyes n√©zet kiv√°laszt√°sa t√∂bb felk√≠n√°lt lehet≈ës√©g k√∂z√ºl." },
            { h: "Szerkeszt√©s 2 n√©zetb≈ël", b: "Gyakorlat 3. szint: k√©t adott vet√ºlet alapj√°n a hi√°nyz√≥ harmadik megszerkeszt√©se." },
            { h: "Szerkeszt√©s axonometri√°r√≥l", b: "Gyakorlat 4. szint: t√©rhat√°s√∫ √°br√°zol√°s alapj√°n a s√≠kbeli vet√ºletek elk√©sz√≠t√©se." },
            { h: "Szerkeszt√©s modell ut√°n", b: "Gyakorlat 5. szint: val√≥s t√°rgy alapj√°n a vet√ºletek √∂n√°ll√≥ megtervez√©se (legkomplexebb)." }
        ]
    }
];

function init() {
    const list = document.getElementById('nav-list');
    dataset.sort((a,b) => a.id - b.id).forEach((topic) => {
        const item = document.createElement('div');
        item.className = 'nav-item' + (topic.id === 1 ? ' active' : '');
        item.innerText = topic.title;
        item.onclick = () => render(topic.id, item);
        list.appendChild(item);
    });
    render(1, document.querySelector('.nav-item'));
}

function render(id, el) {
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    el.classList.add('active');

    const topic = dataset.find(d => d.id === id);
    const root = document.getElementById('map-root');
    root.innerHTML = `
        <div class="card main-node" id="main-node">
            <div class="card-inner" onclick="handleFlip(this, 'main-${id}', event)">
                <div class="face front"><span class="tag">Pro-√ñsszegz√©s</span>${topic.main.h}</div>
                <div class="face back"><span class="tag">Bevezet√©s</span><div class="card-desc">${topic.main.b}</div></div>
            </div>
        </div>
        <div class="sub-grid" id="sub-nodes"></div>
    `;

    const subGrid = document.getElementById('sub-nodes');
    topic.subs.forEach((sub, i) => {
        const div = document.createElement('div');
        div.className = 'card sub-node';
        div.innerHTML = `
            <div class="card-inner" onclick="handleFlip(this, 'sub-${id}-${i}', event)">
                <div class="face front"><span class="tag">M√©lyf√∫r√°s</span>${sub.h}</div>
                <div class="face back"><span class="tag">Defin√≠ci√≥</span><div class="card-desc">${sub.b}</div></div>
            </div>
        `;
        subGrid.appendChild(div);
    });

    setTimeout(drawLines, 100);
    if(window.MathJax) MathJax.typeset();
}

function handleFlip(inner, key, event) {
    inner.parentElement.classList.toggle('flipped');
    if(!seenDefinitions.has(key)) {
        seenDefinitions.add(key);
        xpCount += 15; 
        updateHUD(event);
    }
}

function updateHUD(e) {
    document.getElementById('xp-display').innerText = xpCount;
    const bulb = document.getElementById('bulb-box');
    const scale = Math.min(1 + (xpCount / 1200), 2.5); 
    bulb.style.transform = `scale(${scale})`;
    spawnKnowledgeParticle(e.clientX, e.clientY);
    const rankIdx = Math.min(Math.floor(xpCount / 250), ranksList.length - 1);
    document.getElementById('rank-display').innerText = ranksList[rankIdx];
}

function spawnKnowledgeParticle(x, y) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = x + 'px'; p.style.top = y + 'px';
    document.body.appendChild(p);
    const target = document.getElementById('bulb-box').getBoundingClientRect();
    const targetX = target.left + target.width / 2;
    const targetY = target.top + target.height / 2;
    p.animate([
        { transform: 'scale(1)', opacity: 1 },
        { transform: `translate(${targetX - x}px, ${targetY - y}px) scale(0)`, opacity: 0 }
    ], { duration: 900, easing: 'ease-in' }).onfinish = () => p.remove();
}

function drawLines() {
    const svg = document.getElementById('svg-layer');
    svg.innerHTML = '';
    const main = document.getElementById('main-node').getBoundingClientRect();
    const subs = document.querySelectorAll('.sub-node');
    const canvas = document.querySelector('.canvas');

    subs.forEach(sub => {
        const subRect = sub.getBoundingClientRect();
        const startX = main.left + main.width / 2 + canvas.scrollLeft - 400; 
        const startY = main.bottom + canvas.scrollTop - 140;
        const endX = subRect.left + subRect.width / 2 + canvas.scrollLeft - 400;
        const endY = subRect.top + canvas.scrollTop - 140;

        const midY = startY + (endY - startY) / 2;
        const pathData = `M ${startX} ${startY} L ${startX} ${midY} L ${endX} ${midY} L ${endX} ${endY}`;
        
        const line = document.createElementNS("http://www.w3.org/2000/svg", "path");
        line.setAttribute("d", pathData);
        line.setAttribute("class", "technical-line");
        svg.appendChild(line);

        const arrow = document.createElementNS("http://www.w3.org/2000/svg", "path");
        arrow.setAttribute("d", `M ${endX-6} ${endY-10} L ${endX} ${endY} L ${endX+6} ${endY-10}`);
        arrow.setAttribute("fill", "none"); arrow.setAttribute("stroke", "#94a3b8"); arrow.setAttribute("stroke-width", "2.5");
        svg.appendChild(arrow);
        
        const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        dot.setAttribute("r", "5"); dot.setAttribute("class", "flow-blob");
        const anim = document.createElementNS("http://www.w3.org/2000/svg", "animateMotion");
        anim.setAttribute("path", pathData); anim.setAttribute("dur", (Math.random() * 2 + 2) + "s"); anim.setAttribute("repeatCount", "indefinite");
        dot.appendChild(anim);
        svg.appendChild(dot);
    });
}

window.onresize = drawLines;
init();
</script>

</body>
</html>